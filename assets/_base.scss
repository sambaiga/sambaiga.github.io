/*-- scss:base --*/

// Import Google Fonts if configured
@if $web-font-path {
  @import url("#{$web-font-path}");
}

// =====================================================
// BASE RESET & GLOBAL STYLES
// =====================================================

*, *::before, *::after {
  box-sizing: border-box;
}

html {
  font-size: 100%;
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  
  // Reduced motion support
  @media (prefers-reduced-motion: reduce) {
    scroll-behavior: auto;
  }
}

body {
  margin: 0;
  font-family: $font-family-sans-serif;
  font-size: $font-size-base;
  font-weight: $font-weight-normal;
  line-height: $body-line-height;
  color: $body-color;
  background-color: $body-bg;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  text-align: left;
  hyphens: auto;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  
  // RTL support
  &.rtl {
    direction: rtl;
    text-align: right;
  }
  
  // Focus styles for accessibility
  &:has(:focus-visible) {
    scroll-padding-top: calc($navbar-height + $spacer-3);
  }
}

// =====================================================
// SELECTION & FOCUS STATES
// =====================================================

::selection {
  background-color: rgba($primary, $opacity-30);
  color: $body-color;
}

::-moz-selection {
  background-color: rgba($primary, $opacity-30);
  color: $body-color;
}

:focus-visible {
  outline: $focus-ring;
  outline-offset: $focus-ring-width;
}

// =====================================================
// TYPOGRAPHY
// =====================================================

// Headings with responsive adjustments
h1, h2, h3, h4, h5, h6, .headings-font-family {
  font-family: $headings-font-family;
  font-weight: $headings-font-weight;
  line-height: $headings-line-height;
  margin-top: 0;
  margin-bottom: $spacer-3;
  color: $gray-900;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  
  // Add spacing after headings
  + * {
    margin-top: 0;
  }
}

h1 { 
  font-size: $font-size-xxxl;
  letter-spacing: $letter-spacing-tight;
  
  @include media-breakpoint-down(md) {
    font-size: $font-size-xxl;
    @include responsive-font-size($font-size-xl, $font-size-xxl);
  }
}

h2 { 
  font-size: $font-size-xxl;
  letter-spacing: $letter-spacing-tight;
  
  @include media-breakpoint-down(md) {
    font-size: $font-size-xl;
    @include responsive-font-size($font-size-lg, $font-size-xl);
  }
}

h3 { 
  font-size: $font-size-xl;
  
  @include media-breakpoint-down(md) {
    font-size: $font-size-lg;
    @include responsive-font-size($font-size-base, $font-size-lg);
  }
}

h4 { 
  font-size: $font-size-lg;
}

h5 { 
  font-size: $font-size-base;
}

h6 { 
  font-size: $font-size-sm;
  text-transform: uppercase;
  letter-spacing: $letter-spacing-wider;
  color: $gray-700;
}

// Paragraphs and text elements
p, ul, ol, dl, blockquote, pre, figure, table {
  margin-top: 0;
  margin-bottom: $spacer-3;
  
  &:last-child {
    margin-bottom: 0;
  }
}

// Lead paragraph
.lead {
  font-size: $font-size-lg;
  font-weight: $font-weight-light;
  line-height: $line-height-relaxed;
  color: $gray-700;
  margin-bottom: $spacer-4;
}

// Small text
small, .small {
  font-size: $font-size-sm;
  line-height: $line-height-normal;
}

// Links
a {
  color: $link-color;
  text-decoration: $link-decoration;
  transition: color $transition-duration-base $transition-timing-ease-in-out;
  
  &:hover {
    color: $link-hover-color;
    text-decoration: $link-hover-decoration;
  }
  
  &:focus-visible {
    outline: $link-focus-outline;
    outline-offset: $link-focus-outline-offset;
  }
  
  &:visited {
    color: $link-visited-color;
  }
  
  &:active {
    transform: translateY(1px);
  }
}

// =====================================================
// LISTS
// =====================================================

ul, ol {
  padding-left: $spacer-4;
  margin-bottom: $spacer-3;
  
  ul, ol {
    margin-bottom: 0;
  }
}

dl {
  margin-bottom: $spacer-3;
}

dt {
  font-weight: $font-weight-semibold;
  margin-top: $spacer-3;
  
  &:first-child {
    margin-top: 0;
  }
}

dd {
  margin-left: 0;
  margin-bottom: $spacer-2;
}

// =====================================================
// CONTAINERS & LAYOUT
// =====================================================

.container {
  @include make-container;
  @include container-responsive-padding;
  width: 100%;
}

.container-fluid {
  width: 100%;
  padding-right: $section-padding-x;
  padding-left: $section-padding-x;
  margin-right: auto;
  margin-left: auto;
}

// Main content wrapper
main {
  flex: 1 0 auto;
  width: 100%;
}

// Section spacing
.section {
  @include section-padding;
  
  &-sm {
    @include section-padding(sm);
  }
  
  &-lg {
    @include section-padding(lg);
  }
  
  &-full {
    padding: 0;
  }
}

// =====================================================
// CONTENT WIDTH UTILITIES
// =====================================================

.content-narrow {
  max-width: $content-max-width-narrow;
  margin-left: auto;
  margin-right: auto;
}

.content-normal {
  max-width: $content-max-width;
  margin-left: auto;
  margin-right: auto;
}

.content-wide {
  max-width: $content-max-width-wide;
  margin-left: auto;
  margin-right: auto;
}

// Quarto content containers
.quarto-post, .quarto-page, .quarto-article, .quarto-listing {
  max-width: $content-max-width;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

// =====================================================
// CODE & PRE
// =====================================================

code:not([class]) {
  font-family: $font-family-monospace;
  font-size: $code-font-size;
  padding: $code-padding;
  background-color: $code-bg;
  color: $code-color;
  border-radius: $code-border-radius;
  white-space: nowrap;
}

pre, pre[class*="language-"] {
  font-family: $font-family-monospace;
  font-size: $code-block-font-size;
  padding: $code-block-padding;
  background-color: $code-block-bg;
  border-radius: $code-block-border-radius;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin-bottom: $spacer-3;
  
  code {
    background-color: transparent;
    padding: 0;
    border-radius: 0;
    white-space: pre;
  }
}

// =====================================================
// MEDIA ELEMENTS
// =====================================================

img, svg, video, canvas, audio, iframe, embed, object {
  max-width: 100%;
  height: auto;
  display: block;
}

img {
  border-style: none;
  border-radius: $image-border-radius;
  
  &.rounded {
    border-radius: $border-radius;
  }
  
  &.circle {
    border-radius: $border-radius-full;
  }
}

figure {
  margin: 0 0 $spacer-4;
  
  img {
    margin-bottom: $spacer-2;
  }
  
  figcaption {
    font-size: $font-size-sm;
    color: $gray-600;
    text-align: center;
    font-style: italic;
  }
}

// =====================================================
// TABLES
// =====================================================

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: $spacer-4;
  font-size: $font-size-sm;
}

th, td {
  padding: $spacer-2 $spacer-3;
  border-bottom: $border-width-1 solid $border-color;
  text-align: left;
}

th {
  font-weight: $font-weight-semibold;
  background-color: $gray-100;
  color: $gray-900;
}

tr:last-child td {
  border-bottom: 0;
}

// =====================================================
// HORIZONTAL RULE
// =====================================================

hr {
  box-sizing: content-box;
  height: 0;
  overflow: visible;
  margin: $spacer-5 0;
  border: 0;
  border-top: $border-width-1 solid $border-color-light;
  
  &.hr-sm {
    margin: $spacer-3 0;
  }
  
  &.hr-lg {
    margin: $spacer-6 0;
  }
}

// =====================================================
// DARK THEME BASE
// =====================================================

@media (prefers-color-scheme: dark) {
  body:not(.light-mode) {
    @include dark-theme;
  }
}

body.dark-mode {
  @include dark-theme;
}